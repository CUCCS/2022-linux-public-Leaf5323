# å®éªŒæŠ¥å‘Š

## å®éªŒç¯å¢ƒ

||Host|VM|
|:----:|:----:|:----:|
|OS|Windows11 22H2 22621.1|Ubuntu 20.04.4 LTS x86_64|
|User|leaf2|cirno|

## å®éªŒé—®é¢˜

### åŸºæœ¬è¦æ±‚

- [x] åœ¨ä¸€å°ä¸»æœº(è™šæ‹Ÿæœº)ä¸ŠåŒæ—¶é…ç½®Nginxå’ŒVeryNginx

  - [x] VeryNginxä½œä¸ºæœ¬æ¬¡å®éªŒçš„Web Appçš„åå‘ä»£ç†æœåŠ¡å™¨å’ŒWAF

  - [x] PHP-FPMè¿›ç¨‹çš„åå‘ä»£ç†é…ç½®åœ¨NginxæœåŠ¡å™¨ä¸Šï¼ŒVeryNginxæœåŠ¡å™¨ä¸ç›´æ¥é…ç½®Webç«™ç‚¹æœåŠ¡

- [x] ä½¿ç”¨Wordpressæ­å»ºçš„ç«™ç‚¹å¯¹å¤–æä¾›è®¿é—®çš„åœ°å€ä¸ºï¼š<http://wp.sec.cuc.edu.cn>

- [x] ä½¿ç”¨Damn Vulnerable Web Application(DVWA)æ­å»ºçš„ç«™ç‚¹å¯¹å¤–æä¾›è®¿é—®çš„åœ°å€ä¸ºï¼š<http://dvwa.sec.cuc.edu.cn>

### å®‰å…¨åŠ å›ºè¦æ±‚

- [x] ä½¿ç”¨IPåœ°å€æ–¹å¼å‡æ— æ³•è®¿é—®ä¸Šè¿°ä»»æ„ç«™ç‚¹ï¼Œå¹¶å‘æ–¹å¯å±•ç¤ºè‡ªå®šä¹‰çš„**å‹å¥½é”™è¯¯æç¤ºä¿¡æ¯é¡µé¢-1**

- [x] Damn Vulnerable Web Application(DVWA)åªå…è®¸ç™½åå•ä¸Šçš„è®¿å®¢æ¥æºIPï¼Œå…¶ä»–æ¥æºçš„IPè®¿é—®å‡å‘è®¿å®¢å±•ç¤ºè‡ªå®šä¹‰çš„**å‹å¥½é”™è¯¯æç¤ºä¿¡æ¯é¡µé¢-2**

- [ ] åœ¨ä¸å‡çº§Wordpressç‰ˆæœ¬çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å®šåˆ¶VeryNginxçš„è®¿é—®æ§åˆ¶ç­–ç•¥è§„åˆ™ï¼Œçƒ­ä¿®å¤[WordPress<4.7.1-Username Enumeration](https://www.exploit-db.com/exploits/41497/)

- [ ] é€šè¿‡é…ç½®VeryNginxçš„Filterè§„åˆ™å®ç°å¯¹Damn Vulnerable Web Application(DVWA)çš„SQLæ³¨å…¥å®éªŒåœ¨ä½å®‰å…¨ç­‰çº§æ¡ä»¶ä¸‹è¿›è¡Œé˜²æŠ¤

### VeryNginxé…ç½®è¦æ±‚

- [x] VeryNginxçš„Webç®¡ç†é¡µé¢ä»…å…è®¸ç™½åå•ä¸Šçš„**å‹å¥½é”™è¯¯æç¤ºä¿¡æ¯é¡µé¢-3**

- é€šè¿‡å®šåˆ¶VeryNginxçš„è®¿é—®æ§åˆ¶ç­–ç•¥è§„åˆ™å®ç°ï¼š

  - [x] é™åˆ¶DVWAç«™ç‚¹çš„å•IPè®¿é—®é€Ÿç‡ä¸ºæ¯ç§’è¯·æ±‚æ•°<50

  - [x] é™åˆ¶Wordpressç«™ç‚¹çš„å•IPè®¿é—®é€Ÿç‡ä¸ºæ¯ç§’è¯·æ±‚æ¬¡æ•°<20

  - [x] è¶…è¿‡è®¿é—®é¢‘ç‡é™åˆ¶çš„è¯·æ±‚ç›´æ¥è¿”å›è‡ªå®šä¹‰**é”™è¯¯ä¿¡æ¯æç¤ºé¡µé¢-4**

  - [x] ç¦æ­¢curlè®¿é—®

## é—®é¢˜è§£å†³è®°å½•

### åŸºæœ¬è¦æ±‚çš„æ­å»º

#### åœ¨ä¸€å°ä¸»æœº(è™šæ‹Ÿæœº)ä¸ŠåŒæ—¶é…ç½®Nginxå’ŒVeryNginx

é€‰æ‹©è™šæ‹Ÿæœºè¿›è¡Œæ­å»ºï¼Œæ™®é€šçš„Nginxæ˜¯éœ€è¦é…åˆPHP-FPMä½¿ç”¨ï¼ŒåŒæ—¶æ­å»ºWordpresså’ŒDVWAå‡ä¼šç”¨åˆ°MySQLï¼ŒæŒ‰ç…§DVWAå®˜æ–¹æ–‡æ¡£çš„æ¨èé€‰æ‹©MariaDBå®ç°MySQLç›¸å…³åŠŸèƒ½ã€‚

Wordpress4.7æŒ‡å®šæ¼æ´ç‰ˆæœ¬ä¸DVWAç”±è€å¸ˆæä¾›çš„é“¾æ¥ç›´æ¥wgetä¸‹è½½è§£å‹ï¼Œä»¥ä¸‹æ˜¯å…¶ä»–éœ€è¦ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…çš„å†…å®¹ï¼š

```bash
sudo apt install nginx php-fpm php-mysql mariadb-server
```

ä»¥ä¸‹æ˜¯åŸºäºNginxé…åˆPHP-FPMæ­å»ºçš„Wordpressä¸DVWAç«™ç‚¹çš„ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œç”±äºæ˜¯ç›´æ¥å¤åˆ¶defaulté…ç½®å¹¶åœ¨éœ€è¦ä¿®æ”¹å¤„è¿›è¡Œçš„æ”¹åŠ¨ï¼Œå¯èƒ½çœ‹èµ·æ¥éå¸¸æ¥è¿‘ã€‚

Wordpressä½¿ç”¨8888ç«¯å£

```nginx
#/etc/nginx/sites-enabled/wordpress
##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# https://www.nginx.com/resources/wiki/start/
# https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/
# https://wiki.debian.org/Nginx/DirectoryStructure
#
# In most cases, administrators will remove this file from sites-enabled/ and
# leave it as reference inside of sites-available where it will continue to be
# updated by the nginx packaging team.
#
# This file will automatically load configuration files provided by other
# applications, such as Drupal or Wordpress. These applications will be made
# available underneath a path with that package name, such as /drupal8.
#
# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.
##

# Default server configuration
#
server {
        listen 8888;
        #listen [::]:80 default_server;

        # SSL configuration
        #
        # listen 443 ssl default_server;
        # listen [::]:443 ssl default_server;
        #
        # Note: You should disable gzip for SSL traffic.
        # See: https://bugs.debian.org/773332
        #
        # Read up on ssl_ciphers to ensure a secure configuration.
        # See: https://bugs.debian.org/765782
        #
        # Self signed certs generated by the ssl-cert package
        # Don't use them in a production server!
        #
        # include snippets/snakeoil.conf;

        root /home/cirno/temp/wordpress;

        # Add index.php to the list if you are using PHP
        #index index.html index.htm index.nginx-debian.html;
        index index.php index.html index.htm index.nginx-debain.html

        server_name wp.sec.cuc.edu.cn;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ =404;
        }

        # pass PHP scripts to FastCGI server
        #
        location ~ \.php$ {
                include snippets/fastcgi-php.conf;

                # With php-fpm (or other unix sockets):
                fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
        #       # With php-cgi (or other tcp sockets):
        #       fastcgi_pass 127.0.0.1:9000;
        }

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #       deny all;
        #}
}


# Virtual Host configuration for example.com
#
# You can move that to a different file under sites-available/ and symlink that
# to sites-enabled/ to enable it.
#
#server {
#       listen 80;
#       listen [::]:80;
#
#       server_name example.com;
#
#       root /var/www/example.com;
#       index index.html;
#
#       location / {
#               try_files $uri $uri/ =404;
#       }
#}
```

DVWAä½¿ç”¨888ç«¯å£

```nginx
#/etc/nginx/sites-enabled/dvwa
##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# https://www.nginx.com/resources/wiki/start/
# https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/
# https://wiki.debian.org/Nginx/DirectoryStructure
#
# In most cases, administrators will remove this file from sites-enabled/ and
# leave it as reference inside of sites-available where it will continue to be
# updated by the nginx packaging team.
#
# This file will automatically load configuration files provided by other
# applications, such as Drupal or Wordpress. These applications will be made
# available underneath a path with that package name, such as /drupal8.
#
# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.
##

# Default server configuration
#
server {
        listen 888;
        #listen [::]:8080 default_server;

        # SSL configuration
        #
        # listen 443 ssl default_server;
        # listen [::]:443 ssl default_server;
        #
        # Note: You should disable gzip for SSL traffic.
        # See: https://bugs.debian.org/773332
        #
        # Read up on ssl_ciphers to ensure a secure configuration.
        # See: https://bugs.debian.org/765782
        #
        # Self signed certs generated by the ssl-cert package
        # Don't use them in a production server!
        #
        # include snippets/snakeoil.conf;

        root /home/cirno/temp/DVWA-master/;

        # Add index.php to the list if you are using PHP
        index index.html index.htm index.php index.nginx-debian.html;

        server_name dvwa.sec.cuc.edu.cn;

        location / {
                # First attempt to serve request as file, then
                # as directory, then fall back to displaying a 404.
                try_files $uri $uri/ =404;
        }

        # pass PHP scripts to FastCGI server
        #
        location ~ \.php$ {
                include snippets/fastcgi-php.conf;
        #
                # With php-fpm (or other unix sockets):
                fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
        #       # With php-cgi (or other tcp sockets):
        #       fastcgi_pass 127.0.0.1:9000;
        }

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #       deny all;
        #}
}


# Virtual Host configuration for example.com
#
# You can move that to a different file under sites-available/ and symlink that
# to sites-enabled/ to enable it.
#
#server {
#       listen 80;
#       listen [::]:80;
#
#       server_name example.com;
#
#       root /var/www/example.com;
#       index index.html;
#
#       location / {
#               try_files $uri $uri/ =404;
#       }
#}
```

è¿è¡ŒNginxï¼Œæ“ä½œå³

```bash
sudo nginx
```

ç„¶ååœ¨å®¿ä¸»æœºæµè§ˆå™¨é€šè¿‡<http://192.168.56.101:8888/wp-admin/setup.php>ä¸<http://192.168.56.101:888/setup.php>åˆ†åˆ«è®¿é—®åˆ°Wordpresså’ŒDVWAçš„å®‰è£…é¡µé¢ï¼Œåˆ†åˆ«æŒ‰ç…§Wordpresså’ŒDVWAçš„å®˜æ–¹æ–‡æ¡£è¿›è¡Œå®‰è£…ï¼Œä¸¤ä¸ªç«™ç‚¹éƒ½éœ€è¦æå‰æ‰‹åŠ¨åˆ›å»ºå¯¹åº”çš„SQLæ•°æ®åº“ï¼Œæ“ä½œå¦‚ä¸‹ï¼š

```SQL
#Wordpressæ•°æ®åº“ä¸ç”¨æˆ·åˆ›å»º
create database wordpress;
create user 'wp'@'localhost' identified by '#è¿™é‡Œæ˜¯å¯†ç #';
grant all privileges on wordpress.* to 'wp'@'localhost';
flush privileges;
exit;
```

```SQL
#DVWAæ•°æ®åº“ä¸ç”¨æˆ·åˆ›å»º
create database dvwa;
create user dvwa@localhost identified by 'p@ssw0rd'ï¼›
grant all privileges on dvwa.* to dvwa@localhost;
flush privileges;
exit;
```

éšåæ˜¯è·Ÿç€Wordpressä¸DVWAçš„å®‰è£…å¼•å¯¼å®Œæˆå®‰è£…é…ç½®ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥ç„¶åç»“æŸã€‚

è°ƒæ•´VeryNginxçš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼Œä½¿ç”¨é»˜è®¤çš„80ç«¯å£ä¾¿äºåé¢é…ç½®åå‘ä»£ç†åç›´æ¥åŸŸåè®¿é—®ï¼Œé¿å…è¾“å…¥ç«¯å£å·ï¼š

```nginx
#/opt/verynginx/openresty/nginx/conf/nginx.conf

user  www-data;
worker_processes  auto;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;


events {
    worker_connections  1024;
}

include /opt/verynginx/verynginx/nginx_conf/in_external.conf;

http {
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;
    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;
        client_body_buffer_size 128k;

    #gzip  on;

        #this line shoud be include in every http block
    include /opt/verynginx/verynginx/nginx_conf/in_http_block.conf;

    server {
        listen 80;

        #this line shoud be include in every server block
        include /opt/verynginx/verynginx/nginx_conf/in_server_block.conf;

        location = / {
            root   html;
            index  index.html index.htm;
        }
    }

}
```

ç„¶åè¿è¡ŒVeryNginxï¼Œæ“ä½œå³

```bash
sudo /opt/verynginx/openresty/nginx/sbin/nginx
```

æŸ¥çœ‹è™šæ‹Ÿæœºåå°æƒ…å†µå¯è§Nginxä¸VerNginxè¿è¡Œæƒ…å†µï¼Œä¸‹å›¾æ‰€ç¤ºï¼š

![screenShot](./img/verynginxPlusNginxRunning.png)

åœ¨å®¿ä¸»æœºæµè§ˆå™¨é€šè¿‡<http://192.168.56.101/verynginx/index_zh.html>è®¿é—®åˆ°VeryNginxçš„æ§åˆ¶é¡µé¢ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š

![screesShot](./img/accessVerynginx.png)

åœ¨VeryNginxçš„`é…ç½®>åŸºç¡€>åŒ¹é…è§„åˆ™`ä¸­æ·»åŠ Wordpresså’ŒDVWAçš„åŸŸåè®¿é—®åŒ¹é…ä»¥åŠç›´è¿IPåŒ¹é…è§„åˆ™ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š

![screenShor](./img/matcher.png)

ä¿å­˜é…ç½®ååœ¨`é…ç½®>åç«¯>åå‘ä»£ç†`åˆ†åˆ«æ·»åŠ Wordpresså’ŒDVWAçš„upstreamï¼Œåˆ†åˆ«æŒ‡å‘localhost:8888å’Œlocalhost:888ï¼Œç„¶åä½¿ç”¨å‰é¢çš„Matcheråˆ†åˆ«æ·»åŠ Wordpresså’ŒDVWAçš„Locationæ¡ä»¶ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š

![screenShot](./img/reverseProxy.png)

ä¿å­˜é…ç½®ååœ¨å®¿ä¸»æœºä¸Šé…ç½®hostsæ–‡ä»¶ï¼Œå°†wp.sec.cuc.edu.cnã€dvwa.sec.cuc.edu.cnä¸è™šæ‹ŸæœºIPå³192.168.56.101è¿›è¡Œå¯¹åº”ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š

![screenShot](./img/hosts.png)

ç„¶åå°±å¯ä»¥åœ¨å®¿ä¸»æœºæµè§ˆå™¨åˆ†åˆ«é€šè¿‡<http://wp.sec.cuc.edu.cn>å’Œ<hthttp://dvwa.sesc.cuc.edu.cn>åˆ†åˆ«è®¿é—®åˆ°Wordpresså’ŒDVWAç«™ç‚¹ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š

![screenShot](./img/wpSec.png)

![screenShot](./img/dvwa.png)

### å®‰å…¨åŠ å›ºè¦æ±‚æ­å»º

ä¸€äº›å‰æœŸå‡†å¤‡ï¼Œæ¯”å¦‚å®‰è£…apache2-utilsç”¨äºæµ‹è¯•è®¿é—®é¢‘ç‡é™åˆ¶ï¼š

```bash
sudo apt install apache2-utils
```

å‘hostså†…æ·»åŠ æ–°çš„VeryNginxä¸“å±åŸŸåvn.cfå¯¹åº”192.168.56.101ï¼Œä»¥é˜²é™åˆ¶IPç›´æ¥è®¿é—®åæ— æ³•è®¿é—®VeryNginxæ§åˆ¶é¢æ¿ã€‚

#### blockç›´æ¥ä½¿ç”¨IPè®¿é—®

å‘hostså†…æ·»åŠ æ–°çš„VeryNginxä¸“å±åŸŸåvn.cfå¯¹åº”192.168.56.101ï¼Œä»¥é˜²é™åˆ¶IPç›´æ¥è®¿é—®åæ— æ³•è®¿é—®VeryNginxæ§åˆ¶é¢æ¿ã€‚

åœ¨VeryNginxç®¡ç†é¡µé¢ä¸­çš„`é…ç½®>åŸºæœ¬è®¾ç½®>ç›¸åº”è§„åˆ™`ä¸­åˆ†åˆ«åˆ›å»ºå³å°†ä½¿ç”¨çš„4ç§â€œå‹å¥½â€é”™è¯¯ä¿¡æ¯æç¤ºé¡µé¢ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š

![screenShot](./img/response.png)

å†åˆ©ç”¨å‰é¢æ·»åŠ çš„ç›´è¿IPåŒ¹é…è§„åˆ™ï¼Œåœ¨`é…ç½®>è‡ªå®šä¹‰åŠ¨ä½œ>æ‹¦æˆªè§„åˆ™`ä¸­æ·»åŠ blockâ€œç›´æ¥ä½¿ç”¨IPè®¿é—®â€çš„åŒ¹é…è§„åˆ™ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š

![screenShot](./img/blockDirectIPAccess.png)

ä¿å­˜é…ç½®ï¼Œæ–°å»ºæ ‡ç­¾é¡µè¾“å…¥192.168.56.101è¿›è¡Œæµ‹è¯•ï¼Œç»“æœä¸‹å›¾æ‰€ç¤ºï¼š

![screenShot](./img/accessDeny.png)

#### DVWAç™½åå•è®¿é—®

åœ¨VeryNginxæ§åˆ¶é¢æ¿çš„`é…ç½®>åŸºæœ¬è®¾ç½®>åŒ¹é…è§„åˆ™`ä¸­æ–°å»ºDVWAç™½åå•è®¿é—®çš„Matcher(å…¶å®æ˜¯é»‘åå•é€»è¾‘å®ç°ï¼Œ192.168.56.254æ˜¯æˆ‘ä¸“é—¨é™æ€åˆ†é…äº†å›ºå®šçš„IP)ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š

![screenShot](./img/dvwaWhiteList.png)

ç„¶ååœ¨`é…ç½®>è‡ªå®šä¹‰åŠ¨ä½œ>æ‹¦æˆªè§„åˆ™`ä¸­æ·»åŠ å¯¹DVWAâ€œç™½â€åå•çš„blockå®ç°ä»…é™192.168.56.254è®¿é—®ï¼Œä¸‹å›¾æ‰€ç¤ºï¼š

![screenShot](./img/dvwaWhiteListBlock.png)

æŸ¥çœ‹å®¿ä¸»æœºIPåœ°å€ï¼š

![screenShot](./img/hostMachineIP.png)

ä½¿ç”¨å½“å‰192.168.56.254è¿›è¡Œè®¿é—®ï¼Œé¡ºåˆ©è®¿é—®DVWAå¹¶è¿›è¡Œä¸€æ³¢ç™»å½•ï¼š

![screenShot](./img/dvwaAccessAccept.png)

ä¿®æ”¹å®¿ä¸»æœºIPï¼Œä»ç„¶æ˜¯é™æ€åˆ†é…192.168.56.253ï¼š

![screenShot](./img/changeIP.png)

å†æ¬¡è¿›è¡Œè®¿é—®ï¼š

![screenShot](./img/dvwaAccessDeny.png)

### VeryNginxé…ç½®

#### VeryNginxç™½åå•è®¿é—®

å’ŒDVWAæ€è·¯ç›¸åŒï¼Œé¦–å…ˆåœ¨`é…ç½®>åŸºæœ¬è®¾ç½®>åŒ¹é…è§„åˆ™`ä¸­æ·»åŠ VeryNginxçš„ç™½åå•è®¿é—®ï¼ŒåŒæ ·æ˜¯ä»¥é»‘åå•é€»è¾‘å®ç°ç™½åå•è®¿é—®ï¼š

![screenShot](./img/verynginxWhiteList.png)

ç„¶åå†åœ¨`é…ç½®>è‡ªå®šä¹‰åŠ¨ä½œ>æ‹¦æˆªè§„åˆ™`ä¸­æ·»åŠ å¯¹VeryNginxç™½åå•è®¿é—®çš„blockï¼š

![screen](./img/verynginxWhiteListBlock.png)

ä¿å­˜åæ­¤æ—¶è¿›è¡Œè®¿é—®æ˜¯æ²¡æœ‰é—®é¢˜çš„(å½“å‰IPä¸º192.168.56.254)ï¼ŒåŒç†ä¿®æ”¹æˆ192.168.56.253åå†æ¬¡è®¿é—®æœ‰ï¼š

![screen](./img/verynginxAccessDeny.png)

#### è®¿é—®é¢‘ç‡é™åˆ¶

åœ¨`é…ç½®>è‡ªå®šä¹‰åŠ¨ä½œ>é¢‘ç‡é™åˆ¶`ä¸­æŒ‰ç…§æœ€å…ˆæ·»åŠ çš„åŸŸåMatcheråŒ¹é…æ·»åŠ æŒ‰IPä¸URIåŒ¹é…çš„è®¿é—®é¢‘ç‡é™åˆ¶ï¼š

![screenShot](./img/freqLimit.png)

ä½¿ç”¨`ab -n 100 -c 1 http://wp.sec.cuc.edu.cn`ï¼Œç»“æœå¦‚ä¸‹ï¼š

![screenShot](./img/wpSecFreqLimit.png)

DVWAçš„é¢‘ç‡é™åˆ¶å› è®¾ç½®äº†ä»…å®¿ä¸»æœº192.168.56.254å¯å®ç°è®¿é—®ï¼Œæµ‹è¯•è¿‡ç¨‹å‡ºç°100%è®¿é—®æˆåŠŸç‡å…¶å®ä¸ºâ€œå‹å¥½é”™è¯¯æç¤ºä¿¡æ¯é¡µé¢-2â€ï¼Œå¦å¤–æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„åŠæ³•åœ¨æµè§ˆå™¨ç»™åˆ°é¢‘ç‡>50è®¿é—®/ç§’çš„æƒ…å†µï¼Œæ²¡èƒ½æˆªå›¾åˆ°â€œé”™è¯¯æç¤ºä¿¡æ¯é¡µé¢-4â€

## æ€»ç»“ä¸æ•´ç†

é‡åˆ°çš„é—®é¢˜æˆ–è€…è¸©çš„å‘å°±åœ¨è¿™é‡Œæ€»ç»“å§ã€‚

### ä¸€äº›è¶£äº‹

ãªã—ã€‚

ã„ã„ãˆã€å…¨ç„¶ãªã—ã€‚

### ä¸€äº›è¸©å‘

- é…ç½®PHP-FPMæ—¶æç¤ºç¼ºå°‘zlib(æ²¡è®°é”™çš„è¯)ï¼ŒGoogleäº†ä¸€ä¸‹Ubuntuå®‰è£…zlibï¼ŒæŒ‰ç…§it'sFossçš„[è¿™ä¸ªå¸–å­](https://itsfoss.com/install-zlib-ubuntu/)æ“ä½œï¼Œè§£å†³äº†é—®é¢˜ã€‚

- å¸è½½mysql-serverå®‰è£…mariadb-serveré‡åˆ°äº†å› ä¸ºæ²¡æœ‰å½»åº•ç»“æŸmysqldè¿›ç¨‹å¯¼è‡´å¸è½½ä¸é‡è£…éƒ½ä¸å®Œå…¨ï¼Œä½¿ç”¨systemctlå°è¯•å¯åŠ¨mariadb.serviceå¡åœ¨activatingï¼Œå…·ä½“æƒ…å†µå’Œserverfaultä¸Šçš„[è¿™ç¯‡å¸–å­](https://serverfault.com/questions/1013128/mariadb-service-start-stuck-at-activating)è¿‡äºé‡åˆï¼Œè§£å†³åŠæ³•ä¹Ÿæ˜¯æŒ‰ç…§å¸–å­ä¸‹é¢å”¯ä¸€ä¹Ÿæ˜¯è¢«é‡‡çº³çš„é«˜èµçš„å›ç­”è¿›è¡Œå¤„ç†ï¼Œå®Œç¾è§£å†³äº†é—®é¢˜ï¼Œåªæ˜¯ä¸ªäººæ¥è¯´æä¸æ˜ç™½åŸå¸–æ“ä½œçš„å…·ä½“ç†ç”±ï¼Œäº‘é‡Œé›¾é‡Œï¼Œå¸–å­å›ç­”æˆªå›¾å¦‚ä¸‹ï¼Œè™½ç„¶ä¸Šé¢è´´äº†é“¾æ¥ï¼Œä¸‹é¢å‚è€ƒé“¾æ¥ä¹Ÿæœ‰ğŸ˜¶ï¼š

    ![screenShot](./img/mysqldProblem.png)

## å‚è€ƒé“¾æ¥

- [How to install WordPress](https://wordpress.org/support/article/how-to-install-wordpress/)

- [DVWA README](https://github.com/digininja/DVWA/blob/master/README.zh.md)

- [VeryNginx Wkik](https://github.com/alexazhou/VeryNginx/wiki/%E7%9B%AE%E5%BD%95)

- [mariadb.service start stuck at activating](https://serverfault.com/questions/1013128/mariadb-service-start-stuck-at-activating)

- [How to Install Zlib on Ubuntu Linux](https://itsfoss.com/install-zlib-ubuntu/)

- [Nginx Beginnerâ€™s Guide](http://nginx.org/en/docs/beginners_guide.html#control)
